{
    "pluginAlias": "Homebridge Automower Platform",
    "pluginType": "platform",
    "singular": false,
    "schema": {
      "type": "object",
      "properties": {
        "name": {
          "title": "Name",
          "type": "string",
          "default": "Homebridge Automower Platform",
          "minLength": 1,
          "required": true          
        },
        "username": {
          "title": "Email Address",
          "type": "string",
          "minLength": 1,
          "required": false,
          "x-schema-form": {
            "type": "email"
          },
          "condition": {
            "functionBody": "return model.grant_type === 'password' "
          }
        },
        "password": {
          "title": "Password",
          "type": "string",
          "minLength": 1,
          "required": false,
          "x-schema-form": {
            "type": "password"
          },
          "condition": {
            "functionBody": "return model.grant_type === 'password' "
          }
        },
        "lang": {
          "title": "Language",
          "type": "string",
          "required": true,
          "default": "en",
          "oneOf": [
            {
              "title": "English (en)",
              "enum": [
                "en"
              ]
            }
          ]
        },        
        "appKey": {
          "title": "Application Key",
          "description": "This is the application key which identifies this plugin; changing this value will require another account registered with the Husqvarna Developer Portal.",
          "type": "string",
          "default": "78e47163-dd2a-48bf-9af9-3cec8cadae00",
          "required": false,
          "condition": {
            "functionBody": "return model.grant_type === 'password' "
          }
        },
        "grant_type": {
          "title": "Mode",
          "type": "string",
          "required": true,
          "default": "client_credentials",
          "oneOf": [
            {
              "title": "Password (Legacy)",
              "enum": [
                "password"
              ]
            },
            {
              "title": "Client Credentials",
              "enum": [
                "client_credentials"
              ]
            }
          ]
        },
        "clientSecret": {
          "title": "Application Secret",
          "type": "string",
          "minLength": 1,
          "required": false,
          "x-schema-form": {
            "type": "password"
          },
          "condition": {
            "functionBody": "return model.grant_type === 'client_credentials' "
          }
        }
      }      
    },
    "layout": [
      {
        "type": "flex",
        "flex-flow": "column-count: 2",
        "items": [
          "name",
          "lang"
        ]
      },
      {
        "type": "fieldset",
        "title": "Authentication Settings",
        "description": "Changing the settings in here could prevent your client from being able to login to the Husqvarna platform, proceed with caution.",
        "expandable": false,
        "items": [
          "grant_type",
          "username",
          "password",
          "appKey",
          "appSecret"
        ]
      }
    ]
  }
